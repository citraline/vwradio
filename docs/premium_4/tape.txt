SCA4.4 (Cassette Mechanism with TDA3612)
----------------------------------------

FE/ME:
    output
    metal tape indicator:
        low = non-metal tape
        high = metal tape

MONITOR:
    output
    error condition indicator:
        low = error
        high = no error

SWITCH:
    output
    no tape = constant low
    tape in, not playing = constant high
    play tape:
        ENABLE high->low
        286 ms delay
        SWITCH high->low
        337 ms delay
        SWITCH low->high
        77 ms delay
        SWITCH high->low
        (SWITCH stays low until STOP is pressed, then goes constant high)

ENABLE:
    input
    idles high, radio pulls low to select TDA3612

DATA:
    input
    idles high

CLOCK:
    bidirectional
    idles high
    if ENABLE=low, the radio has selected the TDA3612, and drives
      CLOCK to shift bits out on DATA
    if ENABLE=high, and a cassette is playing, the TDA3612 pulses
      the CLOCK line continuously (tachometer?): 25ms off, 1ms on.
    while playing, if the clock pulses are interrupted for about 500ms(?),
      the radio will report a side switch (e.g. "PLAY A" -> "PLAY B").


Board Connections
-----------------

SCA4.4      MB89677A            Notes
MONITOR     N/C                 Appears completely unconnected
DATA         5 SCA DATA         47K pull-up to Main 5V
CLOCK        7 SCA CLK OUT      47K pull-up to Main 5V
            65 SCA CLOCK IN     Pins 4 & 65 shorted together
ENABLE      39 SCA ENABLE       ?? No pull-up or pull-down ??
FE/ME       41 SCA ME/FE        47K pull-up to Main 5V
SWITCH      64 SCA SWITCH


TDA3612 SPI Commands
--------------------

Play            0x54
Stop            0x62


Simulating Play
---------------

configure FE/ME as output, set it permanently low (non-metal tape)
configure MONITOR as output, set it permanently high (no error condition)
configure ENABLE as input, CLOCK as input, SWITCH as output
set SWITCH high
wait for ENABLE high->low
delay 286 ms
set SWITCH low
delay 337 ms
set SWITCH high
delay 77 ms
set SWITCH low
set CLOCK as output
loop forever:
  set CLOCK high for 25ms
  set CLOCK low for 1ms


Simulating Stop
---------------

set SWITCH high
stop pulsing CLOCK


TEA0675 (Cassette Preamplifier with Dolby NR)
---------------------------------------------

To inject external audio, disconnect pin 1 (OUTA) and pin 24 (OUTB) from
the board.  These are the outputs of the TEA0675's preamplifier.  Connect an
audio source to the pads on the board.  Headphone jack audio from a Macbook Pro
and a Raspberry Pi 2 Model B both worked.

Pin 19 (AMSEQ) always seems to be high, regardless of whether there is
audio from the tape head or not.  The radio doesn't appear to use the
AMS feature.  It uses the LA2000 instead (see below).

Audio will only be heard from the TEA0675 if the LA2000's pin 6 is high.  This
means that either a cassette with music must be playing, or the pin has to
be faked.

If the TEA0675 is completely removed from the circuit, the LA2000 will no
longer detect cassette audio.  The TEA0675 can be removed, but the LA2000 must
also be removed and its pin 6 faked.


LA2000 (Audio Level Sensor)
---------------------------

Pin 6 (APC DET) goes immediately high when there is audio from the tape head and
immediately low when there not.  It does not seem to detect audio from any
other source.  Pin 6 is connected directly to pin 44 on the MCU at IC802.

If the LA2000 is removed and pin 6 tied high, the MCU will always think tape
audio is present and will keep the tape audio active even if the tape head
is disconnected.

Pin 6 can be tied permanently high, but MSS FW/REW will not stop (it will act
like regular FW/REW).  When MSS FW/REW is on, the MCU waits for pin 6 high->low
(end of current song) followed by pin 6 low->high (start of next song).
